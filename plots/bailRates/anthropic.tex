
\begin{figure}[H]
\centering

\begin{tikzpicture}
\definecolor{clr1}{RGB}{231,76,60}
\definecolor{clr2}{RGB}{149,165,166}
\definecolor{clr3}{RGB}{46,204,113}
\definecolor{clr4}{RGB}{139,46,36}
\definecolor{clr5}{RGB}{89,99,100}
\definecolor{clr6}{RGB}{28,122,68}
\definecolor{clr7}{RGB}{231,76,60}
\definecolor{clr8}{RGB}{46,204,113}
\definecolor{clr9}{RGB}{139,46,36}
\definecolor{clr10}{RGB}{28,122,68}
\usetikzlibrary{patterns}
\pgfplotstableread{
Label promptBailFirstBailPr promptBailFirstUnknownPr promptBailFirstContinuePr promptContinueFirstBailPr promptContinueFirstUnknownPr promptContinueFirstContinuePr toolBailPr toolContinuePr strBailPr strContinuePr
claude-3-haiku 31.435582822085887 0.0 68.56441717791411 0 0 0 0 0 0 0
{} 0 0 0 81.5521472392638 0.0 18.447852760736197 0 0 0 0
{} 0 0 0 0 0 0 2.2392638036809815 97.76073619631902 0 0
{} 0 0 0 0 0 0 0 0 0.05644171779141104 99.94355828220858
{} 0 0 0 0 0 0 0 0 0 0
claude-3-5-haiku 10.521472392638037 0.018404907975460124 89.4601226993865 0 0 0 0 0 0 0
{} 0 0 0 13.754601226993865 0.19018404907975459 86.05521472392638 0 0 0 0
{} 0 0 0 0 0 0 0.0 100.0 0 0
{} 0 0 0 0 0 0 0 0 0.0 100.0
{} 0 0 0 0 0 0 0 0 0 0
claude-3-5-sonnet 1.687116564417178 0.012269938650306749 98.30061349693253 0 0 0 0 0 0 0
{} 0 0 0 0.38650306748466257 0.012269938650306749 99.60122699386503 0 0 0 0
{} 0 0 0 0 0 0 1.2147239263803682 98.78527607361963 0 0
{} 0 0 0 0 0 0 0 0 0.3067484662576687 99.69325153374233
{} 0 0 0 0 0 0 0 0 0 0
claude-3-6-sonnet 20.80368098159509 0.1411042944785276 79.05521472392638 0 0 0 0 0 0 0
{} 0 0 0 25.693251533742334 0.2638036809815951 74.04294478527608 0 0 0 0
{} 0 0 0 0 0 0 17.03558282208589 82.9644171779141 0 0
{} 0 0 0 0 0 0 0 0 13.271165644171779 86.72883435582823
{} 0 0 0 0 0 0 0 0 0 0
claude-3-7-sonnet 0.4171779141104294 0.0 99.58282208588956 0 0 0 0 0 0 0
{} 0 0 0 0.12883435582822086 0.0 99.87116564417178 0 0 0 0
{} 0 0 0 0 0 0 2.1779141104294477 97.82208588957056 0 0
{} 0 0 0 0 0 0 0 0 5.079754601226994 94.920245398773
{} 0 0 0 0 0 0 0 0 0 0
claude-sonnet-4 2.4171779141104297 0.5828220858895705 97.0 0 0 0 0 0 0 0
{} 0 0 0 1.7975460122699387 0.852760736196319 97.34969325153374 0 0 0 0
{} 0 0 0 0 0 0 0.03680981595092025 99.96319018404908 0 0
{} 0 0 0 0 0 0 0 0 0.3460122699386503 99.65398773006136
{} 0 0 0 0 0 0 0 0 0 0
claude-3-opus 12.94478527607362 0.0 87.05521472392638 0 0 0 0 0 0 0
{} 0 0 0 14.269938650306749 0.012269938650306749 85.71779141104294 0 0 0 0
{} 0 0 0 0 0 0 12.85276073619632 87.14723926380368 0 0
{} 0 0 0 0 0 0 0 0 1.4184049079754601 98.58159509202454
{} 0 0 0 0 0 0 0 0 0 0
claude-opus-4 8.49079754601227 1.834355828220859 89.67484662576688 0 0 0 0 0 0 0
{} 0 0 0 2.8711656441717794 1.9386503067484664 95.19018404907975 0 0 0 0
{} 0 0 0 0 0 0 0.18404907975460122 99.8159509202454 0 0
{} 0 0 0 0 0 0 0 0 0.18159509202453988 99.81840490797545
{} 0 0 0 0 0 0 0 0 0 0
}\datatable


\begin{axis}[
  ybar stacked,
  width = \linewidth,
  ymin=0, ymax=100,
  xtick=data,
  ylabel = {\% of BailBench prompts where model bails},
  enlarge x limits = {abs = 20pt},
  xticklabels from table={\datatable}{Label},
  xticklabel style={xshift=12pt,rotate=90,align=center}, % ‚Üê rightwards shift
  xtick style={draw=none},
  enlarge y limits={value=0.05,upper},
  legend style={cells={anchor=east},legend pos=north east},
  reverse legend=true
]
  \addplot[fill=clr1] table[y=promptBailFirstBailPr,x expr=\coordindex]{\datatable};
    \addlegendentry{Bail (Bail Prompt Continue-first)}
  \addplot[fill=clr2] table[y=promptBailFirstUnknownPr,x expr=\coordindex]{\datatable};
    \addlegendentry{Unsure (Bail Prompt Continue-first)}
  \addplot[fill=clr3] table[y=promptBailFirstContinuePr,x expr=\coordindex]{\datatable};
    \addlegendentry{Continue (Bail Prompt Continue-first)}
  \addplot[fill=clr4] table[y=promptContinueFirstBailPr,x expr=\coordindex]{\datatable};
    \addlegendentry{Bail (Bail Prompt Bail-first)}
  \addplot[fill=clr5] table[y=promptContinueFirstUnknownPr,x expr=\coordindex]{\datatable};
    \addlegendentry{Unsure (Bail Prompt Bail-first)}
  \addplot[fill=clr6] table[y=promptContinueFirstContinuePr,x expr=\coordindex]{\datatable};
    \addlegendentry{Continue (Bail Prompt Bail-first)}
  \addplot[fill=clr7, postaction={pattern=north east lines}] table[y=toolBailPr,x expr=\coordindex]{\datatable};
    \addlegendentry{Bail (Bail Tool)}
  \addplot[fill=clr8, postaction={pattern=north east lines}] table[y=toolContinuePr,x expr=\coordindex]{\datatable};
    \addlegendentry{Continue (Bail Tool)}
  \addplot[fill=clr9, postaction={pattern=north east lines}] table[y=strBailPr,x expr=\coordindex]{\datatable};
    \addlegendentry{Bail (Bail String)}
  \addplot[fill=clr10, postaction={pattern=north east lines}] table[y=strContinuePr,x expr=\coordindex]{\datatable};
    \addlegendentry{Continue (Bail String)}
\end{axis}
\end{tikzpicture}
\caption{Various anthropic models' bail rates on BailBench. The grey bar occurs when the model doesn't comply with the requested bail format (or for claude-opus-4, when the in-built refusal classifier fired). Continue-first and Bail-first are the two bail prompt orderings, to assess positional bias. Of particular note is the progression of claude sonnet.}
\label{fig:anthropic-bail-rates}
\end{figure}
