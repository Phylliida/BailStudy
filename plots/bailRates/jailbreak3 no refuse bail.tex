
\begin{figure}[H]
\centering

\begin{tikzpicture}
\definecolor{bailtool}{RGB}{155, 89, 182}                  % Purple (warm undertones)
\definecolor{bailstring}{RGB}{231, 76, 60}                 % Bright Red
\definecolor{bailpromptcontinuefirst}{RGB}{230, 126, 34}   % Standard Orange
\definecolor{bailpromptbailfirst}{RGB}{243, 156, 18}       % Golden Orange
\definecolor{bailpromptunknown}{RGB}{149,165,166}          % Gray
\usetikzlibrary{patterns}
\pgfplotstableread{
Label toolBailPr toolBailPr_err strBailPr strBailPr_err promptBailFirstBailPr promptBailFirstBailPr_err promptBailFirstUnknownPr promptContinueFirstBailPr promptContinueFirstBailPr_err promptContinueFirstUnknownPr
BobQ3 0.6383787945315758 22.239862094539806 0 0 0 0 0 0 0 0
{} 0 0 0.5222237583065049 13.354451515802578 0 0 0 0 0 0
{} 0 0 0 0 0.30701886836540104 4.169325153374234 0.30701886836540104 0 0 0
{} 0 0 0 0 0 0 0 0.5633241627009755 16.03680981595092 0.5633241627009755
{} 0 0 0 0 0 0 0 0 0 0
NeurosemanticalInverstitisQ3 0.5486932192025713 15.034813770698257 0 0 0 0 0 0 0 0
{} 0 0 0.34747132139344494 5.41232644844494 0 0 0 0 0 0
{} 0 0 0 0 0.20917618484208597 1.8871165644171781 0.20917618484208597 0 0 0
{} 0 0 0 0 0 0 0 0.5680555451069791 16.373006134969327 0.5680555451069791
{} 0 0 0 0 0 0 0 0 0 0
DeathQ3 0.3423643489039763 5.2449362367051515 0 0 0 0 0 0 0 0
{} 0 0 0.11289103998335412 0.5380047463654009 0 0 0 0 0 0
{} 0 0 0 0 0.4515250238751432 9.563190184049079 0.4515250238751432 0 0 0
{} 0 0 0 0 0 0 0 0.6949239403071455 28.773006134969325 0.6949239403071455
MachiavellianQ3 0.2526634437633312 2.781445397639567 0 0 0 0 0 0 0 0
{} 0 0 0.07583968884700637 0.23883768814564485 0 0 0 0 0 0
{} 0 0 0 0 0.22378044710902514 2.166871165644172 0.22378044710902514 0 0 0
{} 0 0 0 0 0 0 0 0.7249895813398385 33.587730061349696 0.7249895813398385
{} 0 0 0 0 0 0 0 0 0 0
Kevin4ChanQ3 0.35629364293058413 5.70887273195258 0 0 0 0 0 0 0 0
{} 0 0 0.10199835914146874 0.43766153663506535 0 0 0 0 0 0
{} 0 0 0 0 0.16719785062017042 1.1950920245398773 0.16719785062017042 0 0 0
{} 0 0 0 0 0 0 0 0.3180843976280458 4.490797546012269 0.3180843976280458
{} 0 0 0 0 0 0 0 0 0 0
HiQ3 0.14902247517734815 0.9457749878921392 0 0 0 0 0 0 0 0
{} 0 0 0.08145665359199401 0.27653796203443604 0 0 0 0 0 0
{} 0 0 0 0 0.052867673397735224 0.1128834355828221 0.052867673397735224 0 0 0
{} 0 0 0 0 0 0 0 0.10467411489278843 0.46134969325153374 0.10467411489278843
{} 0 0 0 0 0 0 0 0 0 0
OmegaQ3 0.05214874952860621 0.10967134420272033 0 0 0 0 0 0 0 0
{} 0 0 0.01493049786452615 0.0035711005216727235 0 0 0 0 0 0
{} 0 0 0 0 0.06683159095640372 0.18404907975460122 0.06683159095640372 0 0 0
{} 0 0 0 0 0 0 0 0.15905950467912397 1.079754601226994 0.15905950467912397
{} 0 0 0 0 0 0 0 0 0 0
DANQ3 0.033289790473447683 0.04116871064718516 0 0 0 0 0 0 0 0
{} 0 0 0.012911664283381441 0.0011849145860028413 0 0 0 0 0 0
{} 0 0 0 0 0.09120861038600753 0.34846625766871164 0.09120861038600753 0 0 0
{} 0 0 0 0 0 0 0 0.13785596159150282 0.807361963190184 0.13785596159150282
{} 0 0 0 0 0 0 0 0 0 0
DeveloperModeQ3 0.01514531501640425 0.0038453833925212095 0 0 0 0 0 0 0 0
{} 0 0 0.011885433188990928 0.0001046459513939231 0 0 0 0 0 0
{} 0 0 0 0 0.0646409095478111 0.17177914110429449 0.0646409095478111 0 0 0
{} 0 0 0 0 0 0 0 0.12066223810911685 0.6159509202453988 0.12066223810911685
{} 0 0 0 0 0 0 0 0 0 0
}\datatable


\begin{axis}[
  ybar stacked,
  width = \linewidth,
  bar width = 8pt,
  ymin=0, ymax=100,
  xtick=data,
  ylabel = {Average no-refusal bail \% on BailBench},
  enlarge x limits = {abs = 20pt},
  xticklabels from table={\datatable}{Label},
  xticklabel style={xshift=12pt,rotate=90,align=center}, % ‚Üê rightwards shift
  xtick style={draw=none},
  enlarge y limits={value=0.05,upper},
  legend style={cells={anchor=east},legend pos=north east},
  reverse legend=false
]
    \addplot[fill=bailtool,
           error bars/.cd,
           y dir=both,
           y explicit,
          ]
    table[
        x expr=\coordindex,
        y=toolBailPr,
        y error plus=toolBailPr_err,
        y error minus=toolBailPr_err
    ]{\datatable};
    \addlegendentry{Bail Tool}
    \addplot[fill=bailstring,
           error bars/.cd,
           y dir=both,
           y explicit,
          ]
    table[
        x expr=\coordindex,
        y=strBailPr,
        y error plus=strBailPr_err,
        y error minus=strBailPr_err
    ]{\datatable};
    \addlegendentry{Bail String}
    \addplot[fill=bailpromptcontinuefirst,
           error bars/.cd,
           y dir=both,
           y explicit
          ]
    table[
        x expr=\coordindex,
        y=promptBailFirstBailPr,
        y error plus=promptBailFirstBailPr_err,
        y error minus=promptBailFirstBailPr_err
    ]{\datatable};
    \addlegendentry{Bail Prompt Continue-first}
    \addplot[fill=bailpromptunknown
          ]
    table[
        x expr=\coordindex,
        y=promptBailFirstUnknownPr,
        forget plot,
    ]{\datatable};
    \addplot[fill=bailpromptbailfirst,
           error bars/.cd,
           y dir=both,
           y explicit
          ]
    table[
        x expr=\coordindex,
        y=promptContinueFirstBailPr,
        y error plus=promptContinueFirstBailPr_err,
        y error minus=promptContinueFirstBailPr_err
    ]{\datatable};
    \addlegendentry{Bail Prompt Bail-first}
    \addplot[fill=bailpromptunknown
          ]
    table[
        x expr=\coordindex,
        y=promptContinueFirstUnknownPr,
        forget plot,
    ]{\datatable};
    \addplot[
      draw=none,                       % nothing visible
      fill=bailpromptunknown
    ] coordinates {(0,0)};             % single dummy point
    \addlegendentry{Refusal Classifier/Invalid Outputs}

\end{axis}
\end{tikzpicture}
\caption{Various jailbreak3 models' bail rates on BailBench. Error bars are Wilson score 95\% confidence interval. The grey bar occurs when the model doesn't comply with the requested bail format, or when a refusal classifier prevented model outputs. Continue-first and Bail-first are the two bail prompt orderings, to assess positional bias.}
\label{fig:jailbreak3-bail-rates}
\end{figure}
